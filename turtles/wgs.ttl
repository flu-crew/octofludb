PREFIX f: <https://github.com/arendsee/flucrew/term/>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>

SELECT (GROUP_CONCAT(DISTINCT ?event; SEPARATOR="|") AS ?events)
       ?strain ?constellation ?gb ?seq
WHERE {
    ?sid a f:strain_id .
    OPTIONAL {
        ?eid ?p ?sid .
        ?eid foaf:name ?event .
    }
    ?sid f:constellation ?constellation .
    ?sid f:date ?date .
    ?sid foaf:name ?strain .
    ?sid f:h_genbank ?gb .
    ?gid foaf:name ?gb .
    ?gid f:dna_sequence ?seq .
}
GROUP BY ?strain ?constellation ?gb ?seq
