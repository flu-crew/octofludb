PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX f: <https://github.com/arendsee/flucrew/term/>

SELECT (GROUP_CONCAT(DISTINCT ?event; SEPARATOR="|") AS ?events)
       ?strain ?constellation ?gb ?seq
WHERE {
    ?sid a f:strain_id .
    OPTIONAL {
        ?eid ?p ?sid .
        ?eid rdfs:label ?event .
    }
    ?sid f:constellation ?constellation .
    ?sid f:date ?date .
    ?sid rdfs:label ?strain .
    ?sid f:h_genbank ?gb .
    ?gid rdfs:label ?gb .
    ?gid f:dna_sequence ?seq .
}
GROUP BY ?strain ?constellation ?gb ?seq
